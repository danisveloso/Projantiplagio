{% extends "base.html" %}
{% load i18n %}

{% load quiz_tags %}


{% block scripts %}
<!-- SCRIPT GRÁFICO PROGRESSO POR CATEGORIA - SCRIPT GRÁFICO PROGRESSO POR CATEGORIA - SCRIPT   -->
<script type="text/javascript">

    	google.charts.load("current", {packages:['corechart']});
    	google.charts.setOnLoadCallback(drawChart);
     
        function drawChart() {

        var data = google.visualization.arrayToDataTable([
            ['Categorias', 'Porcentagem de acerto'],
            {% for cat, value in cat_scores.items %}
                ['{{ cat }}', {{ value.2 }}]{% if not forloop.last %},{% endif %}
            {% endfor %}
        ]);

        var options = {
		  title: 'PROGRESSO POR CATEGORIA EM TODAS AS TENTATIVAS ',
          backgroundColor: {
              fill: '#fff'
          },
          legendTextStyle: { color: '#555' },
          titleTextStyle: { color: '#555' },
          is3D: true
        };

        var chart = new google.visualization.ColumnChart(document.getElementById('columnchart_values'));

		// ordena a coluna
		data.sort([{column: 1}]);

        chart.draw(data, options);
      }
	
    </script>

	<!-- SCRIPT GRÁFICO PROGRESSO EM TODAS AS TENTATIVAS - SCRIPT GRÁFICO - SCRIPT GRÁFICO - SCRIPT GRÁFICO  - SCRIPT   -->
	<script type="text/javascript">

    	google.charts.load("current", {packages:['corechart']});
    	google.charts.setOnLoadCallback(drawChart);
     
        function drawChart() {

        var data = google.visualization.arrayToDataTable([
            ['Data', 'Porcentagem'],
            {% for exam in exams %}
                ['{{ exam.end }}', {{ exam.get_percent_correct }}]{% if not forloop.last %},{% endif %}
            {% endfor %}
        ]);

        var options = {
          backgroundColor: {
              fill: '#fff'
          },
          legendTextStyle: { color: '#555' },
          titleTextStyle: { color: '#555' },
          is3D: true
        };

        var chart = new google.visualization.ColumnChart(document.getElementById('column_2'));

		// ordena a coluna
		data.sort([{column: 0}]);

	
        	chart.draw(data, options);
	
      }
	
    </script>

	<!-- SCRIPT GRÁFICO - SCRIPT GRÁFICO - SCRIPT GRÁFICO - SCRIPT GRÁFICO  - SCRIPT   -->



{% endblock %}

 

{% block content %}

<section class="site-section">
    <div class="container">

	{% if cat_scores %}
	
		<h1>{% trans "Progresso" %}</h1>

		<table class="table table-bordered table-striped">

			<thead>
			<tr>
				<th>{% trans "Categoria" %}</th>
				<th>{% trans "Questões respondidas corretamente" %}</th>
				<th>{% trans "Total de questões" %}</th>
				<th>%</th>
			</tr>
			</thead>

			<tbody>


			{% for cat, value in cat_scores.items %}
			<tr>
				<td>{{ cat }}</td>
				<td>{{ value.0 }}</td>
				<td>{{ value.1 }}</td>
				<td>{{ value.2 }}</td>
			</tr>

			{% endfor %}

			</tbody>

		</table>
		
		<div align="center" id="columnchart_values" style="width: 800px; height: 500px;"></div>
		
	{% endif %}

	{% if exams %}

		<hr>

		<h1>{% trans "Testes anteriores" %}</h1>
		<p class="lead">
			{% trans "Abaixo estão os resultados dos testes realizados." %}
		</p>

		<table class="table table-bordered table-striped">

			<thead>
			<tr>
				<th>{% trans "Título do questionário" %}</th>
				<th>{% trans "Pontuação" %}</th>
				<th>{% trans "Pontuação possível" %}</th>
				<th>%</th>
			</tr>
			</thead>

			<tbody>

			{% for exam in exams %}

			<tr>
				<td>{{ exam.quiz.title }}</td>
				<td>{{ exam.current_score }}</td>
				<td>{{ exam.get_max_score }}</td>
				<td>{{ exam.get_percent_correct }}</td>
			</tr>

			{% endfor %}

			</tbody>

		</table>
		<hr>
				<strong> Título do questionário: {{ exams.quiz.title }}</strong>
				<div align="center" id="column_2" style="width: 800px; height: 500px;"></div>
		

	{% endif %}
	</div>
</section>

	
{% endblock %}
